<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CONVERSAS</title>
    <link rel="STYLESHEET" TYPE="text/css" href="style/default.css">
    <link rel="STYLESHEET" TYPE="text/css" href="style/conversa.css">
    <script src="https://kit.fontawesome.com/95041753e6.js" crossorigin="anonymous"></script>

</head>

<script>

    var moduleTalk = (json) => {
        //{name:"userName", icon:"userPhoto", msgLast:"oi", date:objct Date,readed:true, countMsg:12}
        var elTalkBox = document.createElement("div")
        elTalkBox.className = "talkBox"
        var elUserIcon = document.createElement("div")
        elUserIcon.className="iconUser"
        if (json.icon.length == 0) {
            var elIU = document.createElement("i")
            elIU.className = "fas fa-users avatar"
            elUserIcon.appendChild(elIU)
        } else {
            var elIU = document.createElement("img")
            elIU.src = json.icon
            elIU.className = "avatar"
            elUserIcon.appendChild(elIU)
        }
        // --  add elUserIcon in elTalkBox
        elTalkBox.appendChild(elUserIcon)
        var elTalks = document.createElement("div")
        elTalks.className = "talks"
        var
            elMsgBox = document.createElement("div")
        elMsgBox.className = "messageBox"

        var
            elUserName = document.createElement("span")
        elUserName.className = 'userName'
        elUserName.innerText = json.name;
        // -- add elUsername in elMsgBox
        elMsgBox.appendChild(elUserName)

        var
            elMessage = document.createElement("span")
        elMessage.className = 'message'
        elMessage.innerText = json.msgLast;
        // -- add elMessage in elMsgBox
        elMsgBox.appendChild(elMessage)
        // -- add elMessageBox in Talks
        elTalks.appendChild(elMsgBox)

        var
            elInfo = document.createElement("div")
        elInfo.className = "infoMessage"
        var elDate = document.createElement("span")
        elDate.className="dateTime"
        elDate.innerText = json.date
        // -- add elDate in elInfo
        elInfo.appendChild(elDate)
        // -- add elInfo in elTalks
        elTalks.appendChild(elInfo)

        // -- add elTalk in TalkBox
        elTalkBox.appendChild(elTalks)

        return elTalkBox
    }

    window.onload = function () {
          var jTalks = [
              {name:"Freitas", 
              icon:"img/freitas.jpg", 
              msgLast:"Eai Thiagão blz vou para a aula", 
              date:new Date(),
              readed:true, 
              countMsg:12
                },
                {name:"Alana", 
              icon:"img/alana.jpg", 
              msgLast:"Pro como faz isso", 
              date:new Date(),
              readed:true, 
              countMsg:1
                } 

            ]  

        jTalks.forEach(obj=>{
            var el = moduleTalk(obj)
            document.getElementsByClassName("containerTalk").item(0).appendChild(el)
        })    
    }
</script>


<body>

    <div class="container">
        <div class="topBar">
            <div class="topBarContent">
                <div class="avatar fab far fa-user"></div>
                <div class="infoUser">
                    <div class="userState">on-line</div>
                    <div class="messageState">Não Lidas 150</div>
                </div>
                <i class="fas fa-envelope-open-text IconNewMessage"></i>
            </div>
            <div class="findBar">
                <input type="text" placeholder="search..." id="findTalk">
            </div>
        </div>

        <div class="content">
            <div class="containerTalk">

            </div>
            <div class="containerMsg">
                <div class="msgUseBar">
                    <div class="iconUser">
                        <i class="fas fa-users avatar"></i>

                    </div>
                    <div class="messageBox">
                        <span class="userName">Borges Lagoa</span>
                        <span class="message">Visto pela ultima vez as 08:50 de hoje</span>
                    </div>
                </div>
                <div class="msgContent">
                    <div class="lineMe">
                        <div class="msgBox me">
                            <div class="msg"> Ola tudo bom como vc esta</div>
                            <div class="infoMsg">
                                <span>11:00</span>
                                <i class="fas fa-check-double"></i>
                            </div>
                        </div>
                    </div>
                    <div class="lineInfo">
                        <div class="date">
                            domingo 12/09
                        </div>
                    </div>
                    <div class="lineTo">
                        <div class="msgBox to">
                            <div class="msg"> Estou bem amigo como vai a família?</div>
                            <div class="infoMsg">
                                <span>11:00</span>
                                <i class="fas fa-check-double"></i>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="msgSendBox">
                    <div class="textSend">
                        <div class="textBox" contentEditable=true></div>

                    </div>

                    <i class="fas fa-paper-plane send"></i>
                </div>
            </div>
        </div>
        <div class="bottom"></div>
    </div>


</body>

</html>